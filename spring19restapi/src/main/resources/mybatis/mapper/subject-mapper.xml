<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
   <mapper namespace="subject">
   
   <select id ="selectList" resultType="SubjectDto">
   		select * from subject order by no asc
   </select>
   
   <select id="selectOne" resultType="SubjectDto" parameterType="int">
   		select * from subject where no=#{no}
   </select>
   
   <insert id="add" parameterType="SubjectDto">
   		insert into subject(no, name, period, price, type)
   		values(#{no}, #{name}, #{period}, #{price}, #{type})
   </insert>
   
   <update id="edit" parameterType="SubjectDto">
   		update subject
   		set name=#{name}, period=#{period}, price=#{price}, type=#{type}
   		where no=#{no}
   </update>
   
   <delete id="remove" parameterType="int">
   		delete subject where no =#{no}
   </delete>
   
   <select id="searchName" resultType="SubjectDto">
   		select * from subject
   		where name like #{name} || '%'
   </select>
   
   <sql id="topNheader">
   		select * from(
   			select rownum rn, TMP.* from(
   </sql>
   
   <sql id="topNfooter">
   			)TMP
   		)where rn between #{begin} and #{end}
   </sql>
   
   <select id="infinite" resultType="SubjectDto">
   		<include refid="topNheader"/>
   			select * from subject order by no asc
   		<include refid="topNfooter"/>
   </select>
   
   </mapper>